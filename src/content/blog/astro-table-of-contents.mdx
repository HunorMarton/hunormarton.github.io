---
title: How to generate a table of contents in Astro from Markdown headings
date: 2024-12-30
tags: [astro, markdown, remark]
---

There are [plugins](https://github.com/remarkjs/remark-toc) that generate a table of contents in place. What if you want to show the table of contents somewhere else on the page? In this article, I will show you how to write a plugin that generates a table of contents in Astro from Markdown headings.

## Writing a Remark Plugin

```js
import { visit } from "unist-util-visit";

interface HeadingNode {
  type: "heading";
  depth: number;
  children: any[];
}

interface ParentNode {
  type: string;
}

interface TOCItem {
  depth: number;
  title: string;
  url: string;
}

export default function remarkTOC() {
  return (tree: any, file: any) => {
    const toc: TOCItem[] = [];

    visit(
      tree,
      "heading",
      (node: HeadingNode, index: any, parent: ParentNode) => {
        if (parent.type !== "root") return;
        const depth = node.depth;
        const title = node.children
          .filter((child: any) => child.type === "text")
          .map((child: any) => child.value)
          .join("");

        const url = title
          .toLowerCase()
          .replace(/[^\w\s-]/g, "")
          .trim()
          .replace(/\s+/g, "-");

        toc.push({ depth, title, url });
      }
    );

    if (toc.length !== 0) {
      file.data.astro.frontmatter.tableOfContents = toc;
    }
  };
}
```

## Configuring Astro

## Creating a Table of Contents
